<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Windows</title>
</head><body>Authentification Process is way more complicated.<br/>
Local interactive logon is performed by the interaction between the logon process (WinLogon), the logon user interface process (LogonUI), the credential providers, LSASS, one or more authentication packages, and SAM or Active Directory. Authentication packages, in this case, are the Dynamic-Link Libraries (DLLs) that perform authentication checks. For example, for non-domain joined and interactive logins, the authentication package Msv1_0.dll is used.<br/>
<br/>
Winlogon is a trusted process responsible for managing security-related user interactions. These include:<ul><li style="list-style-type: none">Launching LogonUI to enter passwords at login</li>
<li style="list-style-type: none">Changing passwords</li>
<li style="list-style-type: none">Locking and unlocking the workstation</li>
</ul>
It relies on credential providers installed on the system to obtain a user's account name or password. Credential providers are COM objects that are located in DLLs.<br/>
<br/>
Winlogon is the only process that intercepts login requests from the keyboard sent via an RPC message from Win32k.sys. Winlogon immediately launches the LogonUI application at logon to display the user interface for logon. After Winlogon obtains a user name and password from the credential providers, it calls LSASS to authenticate the user attempting to log in.<br/>
<br/>
Each interactive logon session creates a separate instance of the Winlogon service<br/>
<br/>
SAM Database (Security Account Manager)<ul><li style="list-style-type: none">-&gt; Credentials stored as NTLM hash:</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none">If Windows system is assigned to workgroup during startup:</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none">%SystemRoot%/system32/config/SAM </li>
</ul>
</li>
<li style="list-style-type: none">If system has been joined to a domain, the Domain Controller must validate the credentials from Active Directory dataebase sroted:</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none">%SystemRoot%\ntds.dit</li>
</ul>
</li>
</ul>
</li>
</ul>
Windows credential Manager: <ul><li style="list-style-type: none">Is a feature on Windows that allows users to save credentials to various network resources and websites. those saved credentials are stored in</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none">PS C:\Users\[Username]\AppData\Local\Microsoft\[Vault/Credentials]\</li>
</ul>
</li>
</ul>
<br/>
NTDS<br/>
Very common in Windows, sends all thne request to a DC for verification.<br/>
All have the same NTDS.dit file that includes the password hashes.<br/>
</body></html>